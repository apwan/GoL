<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html><head>
<title></title>
  <style type="text/css">
    <!--code { font-family: Courier New, Courier; font-size: 10pt; margin: 0px; }-->
  </style>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
</head><body>


<code>/* This page is part of <a href="http://www.bitstorm.org/gameoflife/code/">the Game of Life source code</a> */<br><br></code><div align="left" class="java">
<table border="0" cellpadding="3" cellspacing="0" bgcolor="#ffffff">
   <tr>

  <!-- start source code -->
   <td nowrap="nowrap" valign="top" align="left">
    <code>
<font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*&nbsp;Copyright&nbsp;1996-2004&nbsp;Edwin&nbsp;Martin&nbsp;</font><font color="#7f7f9f">&lt;edwin@bitstorm.nl&gt;</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@author&nbsp;</font><font color="#3f5fbf">Edwin&nbsp;Martin</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff"></font><br/>

<font color="#7f0055"><b>package&nbsp;</b></font><font color="#000000">org.bitstorm.gameoflife;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.Canvas;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.Color;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.Dimension;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.Graphics;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.Image;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.event.ComponentEvent;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.event.ComponentListener;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.event.MouseAdapter;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.event.MouseEvent;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.awt.event.MouseMotionAdapter;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.util.Enumeration;</font><br/>

<font color="#7f0055"><b>import&nbsp;</b></font><font color="#000000">java.util.Vector;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*&nbsp;Subclass&nbsp;of&nbsp;Canvas,&nbsp;which&nbsp;makes&nbsp;the&nbsp;cellgrid&nbsp;visible.</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*&nbsp;Communicates&nbsp;via&nbsp;CellGrid&nbsp;interface.</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@author&nbsp;</font><font color="#3f5fbf">Edwin&nbsp;Martin</font><br/>

<font color="#ffffff">&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#7f0055"><b>public&nbsp;class&nbsp;</b></font><font color="#000000">CellGridCanvas&nbsp;</font><font color="#7f0055"><b>extends&nbsp;</b></font><font color="#000000">Canvas&nbsp;</font><font color="#000000">{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#7f0055"><b>boolean&nbsp;</b></font><font color="#000000">cellUnderMouse;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Image&nbsp;for&nbsp;double&nbsp;buffering,&nbsp;to&nbsp;prevent&nbsp;flickering.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Image&nbsp;offScreenImage;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Graphics&nbsp;offScreenGraphics;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Image&nbsp;offScreenImageDrawed;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Image,&nbsp;containing&nbsp;the&nbsp;drawed&nbsp;grid.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Graphics&nbsp;offScreenGraphicsDrawed;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">cellSize;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">CellGrid&nbsp;cellGrid;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Vector&nbsp;listeners;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">newCellSize;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>private&nbsp;</b></font><font color="#000000">Shape&nbsp;newShape;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Constructs&nbsp;a&nbsp;CellGridCanvas.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">cellGrid&nbsp;the&nbsp;GoL&nbsp;cellgrid</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">cellSize&nbsp;size&nbsp;of&nbsp;cell&nbsp;in&nbsp;pixels</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">CellGridCanvas</font><font color="#000000">(</font><font color="#000000">CellGrid&nbsp;cellGrid,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">cellSize</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.cellGrid&nbsp;=&nbsp;cellGrid;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.cellSize&nbsp;=&nbsp;cellSize;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">setBackground</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">Color</font><font color="#000000">(</font><font color="#990000">0x999999</font><font color="#000000">))</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">addMouseListener</font><font color="#000000">(</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">MouseAdapter</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">mouseReleased</font><font color="#000000">(</font><font color="#000000">MouseEvent&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">draw</font><font color="#000000">(</font><font color="#000000">e.getX</font><font color="#000000">()</font><font color="#000000">,&nbsp;e.getY</font><font color="#000000">())</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">mousePressed</font><font color="#000000">(</font><font color="#000000">MouseEvent&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">saveCellUnderMouse</font><font color="#000000">(</font><font color="#000000">e.getX</font><font color="#000000">()</font><font color="#000000">,&nbsp;e.getY</font><font color="#000000">())</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">})</font><font color="#000000">;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">addMouseMotionListener</font><font color="#000000">(</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">MouseMotionAdapter</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">mouseDragged</font><font color="#000000">(</font><font color="#000000">MouseEvent&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">draw</font><font color="#000000">(</font><font color="#000000">e.getX</font><font color="#000000">()</font><font color="#000000">,&nbsp;e.getY</font><font color="#000000">())</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">})</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">addComponentListener</font><font color="#000000">(&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>new&nbsp;</b></font><font color="#000000">ComponentListener</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">componentResized</font><font color="#000000">(</font><font color="#000000">ComponentEvent&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">resized</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">repaint</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">componentMoved</font><font color="#000000">(</font><font color="#000000">ComponentEvent&nbsp;e</font><font color="#000000">)&nbsp;{}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">componentHidden</font><font color="#000000">(</font><font color="#000000">ComponentEvent&nbsp;e</font><font color="#000000">)&nbsp;{}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">componentShown</font><font color="#000000">(</font><font color="#000000">ComponentEvent&nbsp;e</font><font color="#000000">)&nbsp;{}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Set&nbsp;cell&nbsp;size&nbsp;(zoom&nbsp;factor)</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">cellSize&nbsp;Size&nbsp;of&nbsp;cell&nbsp;in&nbsp;pixels</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">setCellSize</font><font color="#000000">(&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">cellSize&nbsp;</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.cellSize&nbsp;=&nbsp;cellSize;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">resized</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">repaint</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;The&nbsp;grid&nbsp;is&nbsp;resized&nbsp;(by&nbsp;window&nbsp;resize&nbsp;or&nbsp;zooming).</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Also&nbsp;apply&nbsp;post-resize&nbsp;properties&nbsp;when&nbsp;necessary</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">resized</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(&nbsp;</font><font color="#000000">newCellSize&nbsp;!=&nbsp;</font><font color="#990000">0&nbsp;</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellSize&nbsp;=&nbsp;newCellSize;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">newCellSize&nbsp;=&nbsp;</font><font color="#990000">0</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;canvasDim&nbsp;=&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.size</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenImage&nbsp;=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenImageDrawed&nbsp;=&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellGrid.resize</font><font color="#000000">(</font><font color="#000000">canvasDim.width/cellSize,&nbsp;canvasDim.height/cellSize</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(&nbsp;</font><font color="#000000">newShape&nbsp;!=&nbsp;</font><font color="#7f0055"><b>null&nbsp;</b></font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>try&nbsp;</b></font><font color="#000000">{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">setShape</font><font color="#000000">(&nbsp;</font><font color="#000000">newShape&nbsp;</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}&nbsp;</font><font color="#7f0055"><b>catch&nbsp;</b></font><font color="#000000">(</font><font color="#000000">ShapeException&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;ignore</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Remember&nbsp;state&nbsp;of&nbsp;cell&nbsp;for&nbsp;drawing.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">x&nbsp;x-coordinate</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">y&nbsp;y-coordinate</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">saveCellUnderMouse</font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">x,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">y</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>try&nbsp;</b></font><font color="#000000">{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellUnderMouse&nbsp;=&nbsp;cellGrid.getCell</font><font color="#000000">(</font><font color="#000000">x&nbsp;/&nbsp;cellSize,&nbsp;y&nbsp;/&nbsp;cellSize</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}&nbsp;</font><font color="#7f0055"><b>catch&nbsp;</b></font><font color="#000000">(</font><font color="#000000">java.lang.ArrayIndexOutOfBoundsException&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;ignore</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Draw&nbsp;in&nbsp;this&nbsp;cell.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">x&nbsp;x-coordinate</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">y&nbsp;y-coordinate</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">draw</font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">x,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">y</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>try&nbsp;</b></font><font color="#000000">{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellGrid.setCell</font><font color="#000000">(</font><font color="#000000">x&nbsp;/&nbsp;cellSize,&nbsp;y&nbsp;/&nbsp;cellSize,&nbsp;!cellUnderMouse&nbsp;</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">repaint</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}&nbsp;</font><font color="#7f0055"><b>catch&nbsp;</b></font><font color="#000000">(</font><font color="#000000">java.lang.ArrayIndexOutOfBoundsException&nbsp;e</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;ignore</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Use&nbsp;double&nbsp;buffering.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@see&nbsp;</font><font color="#3f5fbf">java.awt.Component#update(java.awt.Graphics)</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">update</font><font color="#000000">(</font><font color="#000000">Graphics&nbsp;g</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;d&nbsp;=&nbsp;getSize</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">((</font><font color="#000000">offScreenImage&nbsp;==&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">))&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenImage&nbsp;=&nbsp;createImage</font><font color="#000000">(</font><font color="#000000">d.width,&nbsp;d.height</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphics&nbsp;=&nbsp;offScreenImage.getGraphics</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">paint</font><font color="#000000">(</font><font color="#000000">offScreenGraphics</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">g.drawImage</font><font color="#000000">(</font><font color="#000000">offScreenImage,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Draw&nbsp;this&nbsp;generation.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@see&nbsp;</font><font color="#3f5fbf">java.awt.Component#paint(java.awt.Graphics)</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">paint</font><font color="#000000">(</font><font color="#000000">Graphics&nbsp;g</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;Draw&nbsp;grid&nbsp;on&nbsp;background&nbsp;image,&nbsp;which&nbsp;is&nbsp;faster</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">offScreenImageDrawed&nbsp;==&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;dim&nbsp;=&nbsp;cellGrid.getDimension</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;d&nbsp;=&nbsp;getSize</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenImageDrawed&nbsp;=&nbsp;createImage</font><font color="#000000">(</font><font color="#000000">d.width,&nbsp;d.height</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed&nbsp;=&nbsp;offScreenImageDrawed.getGraphics</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;draw&nbsp;background&nbsp;(MSIE&nbsp;doesn't&nbsp;do&nbsp;that)</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.setColor</font><font color="#000000">(</font><font color="#000000">getBackground</font><font color="#000000">())</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.fillRect</font><font color="#000000">(</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;d.width,&nbsp;d.height</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.setColor</font><font color="#000000">(</font><font color="#000000">Color.gray</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.fillRect</font><font color="#000000">(</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;cellSize&nbsp;*&nbsp;dim.width&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;cellSize&nbsp;*&nbsp;dim.height&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.setColor</font><font color="#000000">(</font><font color="#000000">getBackground</font><font color="#000000">())</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">x&nbsp;=&nbsp;</font><font color="#990000">1</font><font color="#000000">;&nbsp;x&nbsp;&lt;&nbsp;dim.width;&nbsp;x++</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.drawLine</font><font color="#000000">(</font><font color="#000000">x&nbsp;*&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;x&nbsp;*&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;cellSize&nbsp;*&nbsp;dim.height&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>for&nbsp;</b></font><font color="#000000">(</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">y&nbsp;=&nbsp;</font><font color="#990000">1</font><font color="#000000">;&nbsp;y&nbsp;&lt;&nbsp;dim.height;&nbsp;y++</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">offScreenGraphicsDrawed.drawLine</font><font color="#000000">(&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;y&nbsp;*&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;cellSize&nbsp;*&nbsp;dim.width&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;y&nbsp;*&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">g.drawImage</font><font color="#000000">(</font><font color="#000000">offScreenImageDrawed,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#990000">0</font><font color="#000000">,&nbsp;</font><font color="#7f0055"><b>null</b></font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;draw&nbsp;populated&nbsp;cells</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">g.setColor</font><font color="#000000">(</font><font color="#000000">Color.yellow</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Enumeration&nbsp;</font><font color="#7f0055"><b>enum&nbsp;</b></font><font color="#000000">=&nbsp;cellGrid.getEnum</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Cell&nbsp;c;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>while&nbsp;</b></font><font color="#000000">(&nbsp;</font><font color="#7f0055"><b>enum</b></font><font color="#000000">.hasMoreElements</font><font color="#000000">()&nbsp;)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">c&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">Cell</font><font color="#000000">)</font><font color="#7f0055"><b>enum</b></font><font color="#000000">.nextElement</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">g.fillRect</font><font color="#000000">(</font><font color="#000000">c.col&nbsp;*&nbsp;cellSize,&nbsp;c.row&nbsp;*&nbsp;cellSize,&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">,&nbsp;cellSize&nbsp;-&nbsp;</font><font color="#990000">1</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;This&nbsp;is&nbsp;the&nbsp;preferred&nbsp;size.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@see&nbsp;</font><font color="#3f5fbf">java.awt.Component#getPreferredSize()</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">Dimension&nbsp;getPreferredSize</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;dim&nbsp;=&nbsp;cellGrid.getDimension</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;new&nbsp;</b></font><font color="#000000">Dimension</font><font color="#000000">(&nbsp;</font><font color="#000000">cellSize&nbsp;*&nbsp;dim.width,&nbsp;&nbsp;cellSize&nbsp;*&nbsp;dim.height&nbsp;</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;This&nbsp;is&nbsp;the&nbsp;minimum&nbsp;size&nbsp;(size&nbsp;of&nbsp;one&nbsp;cell).</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@see&nbsp;</font><font color="#3f5fbf">java.awt.Component#getMinimumSize()</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#000000">Dimension&nbsp;getMinimumSize</font><font color="#000000">()&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>return&nbsp;new&nbsp;</b></font><font color="#000000">Dimension</font><font color="#000000">(&nbsp;</font><font color="#000000">cellSize,&nbsp;&nbsp;cellSize&nbsp;</font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Settings&nbsp;to&nbsp;appy&nbsp;after&nbsp;a&nbsp;window-resize.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">newShape&nbsp;new&nbsp;shape</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">newCellSize&nbsp;new&nbsp;cellSize</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">setAfterWindowResize</font><font color="#000000">(&nbsp;</font><font color="#000000">Shape&nbsp;newShape,&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">newCellSize&nbsp;</font><font color="#000000">)&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.newShape&nbsp;=&nbsp;newShape;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>this</b></font><font color="#000000">.newCellSize&nbsp;=&nbsp;newCellSize;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#3f5fbf">/**</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;Draws&nbsp;shape&nbsp;in&nbsp;grid.</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@param&nbsp;</font><font color="#3f5fbf">shape&nbsp;name&nbsp;of&nbsp;shape</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@return&nbsp;</font><font color="#3f5fbf">true&nbsp;when&nbsp;shape&nbsp;fits,&nbsp;false&nbsp;otherwise</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*&nbsp;</font><font color="#7f9fbf">@throws&nbsp;</font><font color="#3f5fbf">ShapeException&nbsp;if&nbsp;the&nbsp;shape&nbsp;does&nbsp;not&nbsp;fit&nbsp;on&nbsp;the&nbsp;canvas</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;</font><font color="#3f5fbf">*/</font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#7f0055"><b>public&nbsp;synchronized&nbsp;</b></font><font color="#7f0055"><b>void&nbsp;</b></font><font color="#000000">setShape</font><font color="#000000">(</font><font color="#000000">Shape&nbsp;shape</font><font color="#000000">)&nbsp;</font><font color="#7f0055"><b>throws&nbsp;</b></font><font color="#000000">ShapeException&nbsp;</font><font color="#000000">{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">xOffset;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">yOffset;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int</b></font><font color="#000000">[][]&nbsp;</font><font color="#000000">shapeGrid;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;dimShape;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Dimension&nbsp;dimGrid;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int&nbsp;</b></font><font color="#000000">i;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;get&nbsp;shape&nbsp;properties</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//shapeGrid&nbsp;=&nbsp;shape.getShape();</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">dimShape&nbsp;=&nbsp;&nbsp;shape.getDimension</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">dimGrid&nbsp;=&nbsp;&nbsp;cellGrid.getDimension</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>if&nbsp;</b></font><font color="#000000">(</font><font color="#000000">dimShape.width&nbsp;&gt;&nbsp;dimGrid.width&nbsp;||&nbsp;dimShape.height&nbsp;&gt;&nbsp;dimGrid.height</font><font color="#000000">)</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>throw&nbsp;new&nbsp;</b></font><font color="#000000">ShapeException</font><font color="#000000">(&nbsp;</font><font color="#2a00ff">&#34;Shape&nbsp;doesn't&nbsp;fit&nbsp;on&nbsp;canvas&nbsp;(grid:&nbsp;&#34;</font><font color="#000000">+dimGrid.width+</font><font color="#2a00ff">&#34;x&#34;</font><font color="#000000">+dimGrid.height+</font><font color="#2a00ff">&#34;,&nbsp;shape:&nbsp;&#34;</font><font color="#000000">+dimShape.width+</font><font color="#2a00ff">&#34;x&#34;</font><font color="#000000">+dimShape.height+</font><font color="#2a00ff">&#34;)&#34;</font><font color="#000000">)</font><font color="#000000">;&nbsp;</font><font color="#3f7f5f">//&nbsp;shape&nbsp;doesn't&nbsp;fit&nbsp;on&nbsp;canvas</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;center&nbsp;the&nbsp;shape</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">xOffset&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">dimGrid.width&nbsp;-&nbsp;dimShape.width</font><font color="#000000">)&nbsp;</font><font color="#000000">/&nbsp;</font><font color="#990000">2</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">yOffset&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#000000">dimGrid.height&nbsp;-&nbsp;dimShape.height</font><font color="#000000">)&nbsp;</font><font color="#000000">/&nbsp;</font><font color="#990000">2</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellGrid.clear</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#3f7f5f">//&nbsp;draw&nbsp;shape</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">Enumeration&nbsp;cells&nbsp;=&nbsp;shape.getCells</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>while&nbsp;</b></font><font color="#000000">(</font><font color="#000000">cells.hasMoreElements</font><font color="#000000">())&nbsp;{</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#7f0055"><b>int</b></font><font color="#000000">[]&nbsp;</font><font color="#000000">cell&nbsp;=&nbsp;</font><font color="#000000">(</font><font color="#7f0055"><b>int</b></font><font color="#000000">[])&nbsp;</font><font color="#000000">cells.nextElement</font><font color="#000000">()</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">cellGrid.setCell</font><font color="#000000">(</font><font color="#000000">xOffset&nbsp;+&nbsp;cell</font><font color="#000000">[</font><font color="#990000">0</font><font color="#000000">]</font><font color="#000000">,&nbsp;yOffset&nbsp;+&nbsp;cell</font><font color="#000000">[</font><font color="#990000">1</font><font color="#000000">]</font><font color="#000000">,&nbsp;</font><font color="#7f0055"><b>true</b></font><font color="#000000">)</font><font color="#000000">;</font><br/>

<font color="#ffffff">&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#ffffff"></font><br/>

<font color="#ffffff">&nbsp;&nbsp;</font><font color="#000000">}</font><br/>

<font color="#000000">}</font></code>

   </td>
  <!-- end source code -->
   </tr>

  <!-- start Java2Html link -->
   <tr>
    <td align="right">
<small>
<a href="http://www.java2html.de" target="_blank">Java2html</a>
</small>
    </td>
   </tr>
  <!-- end Java2Html link -->
</table>
</div>
<!-- =       END of automatically generated HTML code       = -->
<!-- ======================================================== -->



</body></html>